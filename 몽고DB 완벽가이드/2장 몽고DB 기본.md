# 2장 몽고DB 기본
도큐먼트는 키와 연결된 값의 집합으로 이뤄져 있다.
```sql
{"greeting" : "Hello, world!"}
{"greeting" : "Hello, world!", "views" : 3)
```
도큐먼트의 키는 문자열이다. 몇몇 예외를 빼곤 UTF-8 문자를 사용 가능하다.
몽고DB는 데이터형과 대소문자를 구분한다.
또한 키가 중복될 수 없다.

### 2.2 컬렉션
컬렉션은 도큐먼트의 모음이다. 테이블에 대응된다고 생각한다.

#### 2.2.1 동적 스키마
컬렉션은 동적 스키마를 가질 수 있어 다른 구조를 가진 도큐먼트들이 저장될 수 있다.
```sql

{"greeting" : "Hello, world!", "views": 3} 
{"signoff": "Good night, and good luck"}
```

도큐먼트들의 ヲI, 키의 개수, 데이터형의 값은 모두 다르다. 

#### 네이밍
컬렉션은 이름으로 식별된다.
* 빈 문자열(”り은 유효한 컬렉션명이 아니다. 
* \0(null 문자)은 컬렉션명의 끝을 나타내는 문자이므로 컬렉션 명에 사용할 수 없다
* system.으로 시작하는 컬렉션명은 시스템 컬렉션에서 사용하는 예약어이므로 사용할 수 없다. 예를 들어 system.users 컬렉션에는 
데이터베이스 사용자 정보가, system.namespaces 컬렉션에는 데이터베이스 내 모든 컬렉션의 정보가 들어 있다.
* 사용자가 만든 컬렉션은 이름에 예약어인 $를 포함할 수 없다. 시스템에서 생성한 몇몇 컬렉션에서 $ 문자를 사용하므로 
데이터베이스에서 사용하는 다양한 드라이버가 $ 문자를 포함하는 컬렉션명을 지원하기는 한다. 이런 컬렉션에 접근access할 때가 
아니라면 $를 컬렉션명에 사용해서는 안 된다.

##### 서브컬렉션
서브컬렉션의 네임스페이스에 .(마침표) 문자를 사용해 컬렉션을 체계화한다.  
서브컬렉션은 특별한 속성은 없지만 여러 몽고DB 툴에서 지원하므로 유용하다.

### 2.5. 데이터베이스
#### 2.5.3 셸 기본 작업
생성: insertOne
읽기: find, findOne
갱신: updateOne
삭제: deleteOne, deleteMany

### 2.6 데이터형
#### 2.6.1 기본 데이터형
1. null
2. boolean
3. 숫자: 64bit 부동 소수점 수를 기본으로 사용, 4 or 8바이트 부호 정수는 NumberInt 또는 NumberLong 사용
4. 문자열: 어떤 UTF-8이든 표현 가능
5. 날짜: unix timestamp로 64비트 정수로 표현됌
6. 자바스크립트의 정규표현식 문법 사용
7. 배열
8. 부모의 자식 도큐먼트
9. 객체ID: 12byte

#### 2.6.5 _id와 ObjectId
몽고DB에 저장된 모든 도큐먼트는 _id 키를 가진다. _id는 어떤 데이터 형이어도 상관 없으나 기본적으로 ObjectId이다.
ObjectId를 사용하는 이유는 몽고DB의 분산 특성을 살리기 위해서이다. 샤딩된 환경에서 고유 식별자를 생성하기 위해 고안되었다.
ObjectId는 12바이트로 24자리 16진수 문자열 표현이 가능하다. 동시성에 맞춰 유일성을 보장한다.