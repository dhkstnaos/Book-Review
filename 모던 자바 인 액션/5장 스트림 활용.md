# 5장 스트림 활용

### 5.1 필터링
#### 5.1.1 프레디케이트로 필터링
Predicate 함수형 인터페이스로 일치하는 모든 요소를 포함하는 스트림을 반환한다.
```java
List<Dish> dishes = menu.stream()
                .filter(Dish::isVegetarian)
                .collect(Collectors.toList());
```
#### 5.1.2 고유 요소 필터링
distinct를 이용해 유일한 값들을 가지는 요소를 가질 수 있도록 할 수 있다.(고유 요소는 hashcode, equals로 결정된다.)
````java
List.of(1, 2, 1, 3, 3, 2, 4).stream()
                .filter(i -> i % 2 == 0)
                .distinct()
                .collect(Collectors.toList());
````

### 5.2 스트림 슬라이싱
#### 프레디케이트를 이용한 슬라이싱
자바9 이상부턴 takeWhile, dropWhile 두 가지 메서드를 지원한다.
이미 컬렉션이 정렬되어 있다는 사실을 알 때 320보다 같거나 클땐 반복 작업을 중단해도 된다.
작은 크기는 상관없으나 많은 크기의 스트림에선 상당한 차이가 될 수 있다.
* takeWhile(): 제시된 요구사항과 다른 값이 나온다면 반복 작업을 중단한다.
* dropWhile(): Predicate가 처음으로 거짓이 되는 지점까지 발견된 요소를 무시한다.
```java
menus.stream()
        .takeWhile(dish -> dish.getCalories() < 320)
        .collect(Collectors.toList());

menus.stream()
        .dropWhile(dish -> dish.getCalories() < 320)
        .collect(Collectors.toList());
```

#### 5.2.2 스트림 축소
스트림은 주어진 값 이하의 크기를 갖는 스트림을 반환하도록 limit(n)를 지원한다.
```java
menus.stream()
        .filter(dish -> dish.getCalories() < 320)
        .limit(3)
        .collect(Collectors.toList());
```

#### 5.2.3 요소 건너뛰기
처음 n개 요소를 제외하기 위해 skip(n)을 지원한다.
이거 잘 쓸 상황이 나올거 같진 않다. skip해버리자.

### 5.3 매핑
#### 5.3.1 스트림의 각 요소에 함수 적용
map 메서드를 활용하면 인수를 새로운 요소로 매핑되도록 한다.
````java
menus.stream()
        .map(Dish::getName)
        .collect(Collectors.toList());
````

#### 5.3.2 스트림 평면화
아래와 같이 문자열 리스트를 고유 문자로 만들어진 리스트로도 변환할 수 있다.
```java
Arrays.stream(words)
        .map(word -> word.split(""))
        .collect(Collectors.toList());
```

#### flatMap
각 배열을 스트림이 아니라 콘텐츠로 매핑한다. 스트림의 각 값을 다른 스트림으로 만들고 모든 스트림을 하나의 스트림으로 연결하는 기능을 수행한다.  
#####두 개의 숫자 리스트들의 숫자 쌍 리스트를 반환하는 방법
```java
List<Integer> list1 = List.of(1, 2, 3);
List<Integer> list2 = List.of(4, 5);
list1.stream()
        .flatMap(i -> list2.stream()
        .filter(j -> j % 2 == 0) //filter를 넣을 수도 있다.
        .map(j -> new int[]{i, j}))
        .collect(Collectors.toList());
```

### 5.4 검색과 매칭
#### 5.4.1 프레디케이트가 한 요소와 일치하는지 확인
anyMatch() 메서드로 요소와 일치하는지 확인할 수 있다.
```java
if (menus.stream().anyMatch(Dish::isVegetarian)) {
    System.out.println("isVegeterian");
}

//당연히 중간에 filter를 넣어 필터링도 할 수 있다.
if (menus.stream().filter(dish -> dish.getType().equals(OTHER)).anyMatch(Dish::isVegetarian)) {
        System.out.println("isVegeterian");
}
```
#### 5.4.2 프레디케이트가 모든 요소와 일치하는지 확인
allMatch() 메서드로 요소와 일치하는지 확인할 수 있다.
```java
if (menus.stream().allMatch(Dish::isVegetarian)) {
    System.out.println("isVegeterian");
}
```